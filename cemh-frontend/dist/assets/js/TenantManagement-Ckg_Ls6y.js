import{X as P,_ as Ve,c as B,e as he,b as d,A as e,p as l,z as g,a as T,r as A,l as ke,o as we,E as m,L as Q,W as xe,k as U,f as i,t as u,g as Ce,m as ae,H as $,C as De,F as Fe,d as Ue}from"./index-Ntw4s37F.js";function te(_){return P({url:"/api/tenants",method:"get",params:_})}function Pe(_){return P({url:"/api/tenants",method:"post",data:_})}function Se(_,a){return P({url:`/api/tenants/${_}`,method:"put",data:a})}function ze(_){return P({url:`/api/tenants/${_}`,method:"delete"})}function le(_){return P({url:`/api/tenants/real/${_}`,method:"delete"})}function Le({tenantId:_,years:a,months:R,days:t}){return P({url:"/api/tenants/renew",method:"post",params:{tenantId:_,years:a,months:R,days:t}})}function Ee(_){return P({url:"/api/tenants/disable",method:"post",params:{tenantId:_}})}function Be(_){return P({url:"/api/tenants/enable",method:"post",params:{tenantId:_}})}const Re={name:"TenantManagement",setup(){const _=T(!1),a=T(!1),R=T([]),t=T([]),z=T(!1),G=T(!1),x=T(""),c=T(null),V=T(null),L=T("basic"),f=T(!1),Y=T([]),D=T([]),h=T(!1),v=A({years:null,months:null,days:null}),p=T(null),C=A({name:"",code:"",status:null,packageType:null}),y=A({page:1,size:10,total:0}),O=A({totalTenants:156,activeTenants:142,expiredTenants:8,monthlyRevenue:"125,680"}),b=A({id:null,name:"",code:"",contactPerson:"",contactPhone:"",contactEmail:"",address:"",logo:"",packageType:1,maxUsers:50,storageLimit:10,startTime:"",expireTime:"",features:["user_management","meeting_management"],status:1,remark:""}),j={name:[{required:!0,message:"请输入租户名称",trigger:"blur"}],code:[{required:!0,message:"请输入租户代码",trigger:"blur"},{pattern:/^[A-Za-z0-9_-]+$/,message:"租户代码只能包含字母、数字、下划线和横线",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],contactEmail:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},k=async()=>{_.value=!0;try{const o={page:y.page,size:y.size,name:C.name,code:C.code,status:C.status,packageType:C.packageType},s=await te(o);s&&s.data?(R.value=(s.data.records||[]).map(r=>({id:r.id,name:r.tenantName,code:r.tenantCode,contactPerson:r.contactName,contactPhone:r.contactPhone,contactEmail:r.contactEmail,logo:r.logoUrl,status:r.status,packageType:r.createBy,expireTime:r.expireTime,maxUsers:r.maxUsers,remark:r.remark,createTime:r.createTime,address:r.remark})),y.total=s.data.total||0):(R.value=[],y.total=0)}catch{m.error("获取租户列表失败")}finally{_.value=!1}},H=()=>{y.page=1,k()},N=()=>{Object.assign(C,{name:"",code:"",status:null,packageType:null}),y.page=1,k()},E=()=>{x.value="新增租户",ee(),z.value=!0},q=o=>{x.value="编辑租户",Object.assign(b,{...o,startTime:new Date(o.startTime),expireTime:new Date(o.expireTime)}),z.value=!0},S=o=>{V.value=o,G.value=!0},J=async(o,s)=>{const[r,K]=o.split("-");try{switch(r){case"renew":p.value=s.id,v.years=null,v.months=null,v.days=null,h.value=!0;break;case"config":m.info("配置管理功能开发中...");break;case"users":m.info("用户管理功能开发中...");break;case"stats":m.info("使用统计功能开发中...");break;case"backup":m.success("数据备份已启动");break;case"enable":await Q.confirm(`确定要启用租户 "${s.name}" 吗？`,"启用确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}),await Be(s.id),m.success("租户启用成功");break;case"disable":await Q.confirm(`确定要停用租户 "${s.name}" 吗？`,"停用确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ee(s.id),m.success("租户停用成功");break}k()}catch(Te){Te!=="cancel"&&m.error("操作失败")}},W=()=>{m.info("批量续费功能开发中...")},M=()=>{m.success("批量通知发送成功")},w=()=>{m.success("数据导出成功")},X=(o,s)=>{b.logo=URL.createObjectURL(s.raw)},Z=o=>{const s=o.type==="image/jpeg"||o.type==="image/png",r=o.size/1024/1024<2;return s||m.error("上传logo图片只能是 JPG/PNG 格式!"),r||m.error("上传logo图片大小不能超过 2MB!"),s&&r},n=o=>{t.value=o},F=o=>{y.size=o,y.page=1,k()},ne=o=>{y.page=o,k()},oe=async()=>{try{await c.value.validate(),a.value=!0;const o={tenantName:b.name,tenantCode:b.code,contactName:b.contactPerson,contactPhone:b.contactPhone,contactEmail:b.contactEmail,logoUrl:b.logo,status:b.status,expireTime:b.expireTime,maxUsers:b.maxUsers,remark:b.address,packageType:b.packageType};if(b.id){const s=await Se(b.id,o);s&&s.success?(m.success("更新成功"),z.value=!1,k()):m.error((s==null?void 0:s.message)||"更新失败")}else{const s=await Pe(o);s&&s.success?(m.success("创建成功"),z.value=!1,k()):m.error((s==null?void 0:s.message)||"创建失败")}}catch(o){console.error("提交表单错误:",o),o!==!1&&m.error((o==null?void 0:o.message)||"操作失败")}finally{a.value=!1}},se=async o=>{try{console.log("删除租户ID:",o.id,o),await Q.confirm(`确定要删除租户 "${o.name}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const s=await ze(o.id);console.log("删除请求返回:",s),s&&s.success?(m.success("删除成功"),k()):m.error((s==null?void 0:s.message)||"删除失败")}catch(s){console.error("删除租户错误:",s),s!=="cancel"&&m.error((s==null?void 0:s.message)||"删除失败")}},de=()=>{z.value=!1,ee()},ee=()=>{var o;Object.assign(b,{id:null,name:"",code:"",contactPerson:"",contactPhone:"",contactEmail:"",address:"",logo:"",packageType:1,maxUsers:50,storageLimit:10,startTime:"",expireTime:"",features:["user_management","meeting_management"],status:1,remark:""}),L.value="basic",(o=c.value)==null||o.clearValidate()},ie=(o,s="YYYY-MM-DD HH:mm:ss")=>{if(!o)return"";const r=new Date(o);return s==="YYYY-MM-DD"?r.toLocaleDateString("zh-CN"):r.toLocaleString("zh-CN")},re=o=>({1:"info",2:"warning",3:"success"})[o]||"info",ce=o=>({1:"基础版",2:"专业版",3:"企业版"})[o]||"未知",me=o=>({0:"danger",1:"success",2:"warning"})[o]||"info",ue=o=>({0:"停用",1:"正常",2:"过期"})[o]||"未知",ge=o=>{const s=new Date,r=new Date(o),K=Math.ceil((r-s)/(1e3*60*60*24));return K<0?"expired":K<=30?"warning":"normal"},pe=o=>({user_management:"用户管理",meeting_management:"会议管理",news_management:"资讯管理",course_management:"课程管理",data_analysis:"数据分析",api_access:"API接口"})[o]||o,I=async()=>{var s;const o=await te({page:1,size:1e3,deleted:1});Y.value=(((s=o==null?void 0:o.data)==null?void 0:s.records)||[]).map(r=>({id:r.id,name:r.tenantName,code:r.tenantCode,contactPerson:r.contactName,contactPhone:r.contactPhone,status:r.status,createTime:r.createTime,...r}))};ke(f,o=>{o&&I()});const fe=o=>{D.value=o},_e=async o=>{await P.post(`/api/tenants/restore/${o.id}`),m.success("恢复成功"),I(),k()},be=async o=>{await le(o.id),m.success("彻底删除成功"),I()},ye=async()=>{await Promise.all(D.value.map(o=>le(o.id))),m.success("批量彻底删除成功"),I()},ve=async()=>{if(!v.years&&!v.months&&!v.days){m.error("年/月/日不能全部为空");return}try{await Le({tenantId:p.value,years:v.years,months:v.months,days:v.days}),m.success("续费成功"),h.value=!1,k()}catch{m.error("续费失败")}};return we(()=>{k()}),{loading:_,submitLoading:a,tenantList:R,selectedTenants:t,dialogVisible:z,viewDialogVisible:G,dialogTitle:x,tenantFormRef:c,currentTenant:V,activeTab:L,searchForm:C,pagination:y,stats:O,tenantForm:b,tenantFormRules:j,getPackageType:re,getPackageText:ce,getStatusType:me,getStatusText:ue,getExpireClass:ge,getFeatureText:pe,getTenantList:k,handleSearch:H,handleReset:N,handleAdd:E,handleEdit:q,handleView:S,handleDropdownCommand:J,handleBatchRenew:W,handleBatchNotify:M,handleExport:w,handleLogoSuccess:X,beforeLogoUpload:Z,handleSelectionChange:n,handleSizeChange:F,handleCurrentChange:ne,handleSubmit:oe,handleDialogClose:de,formatDate:ie,handleDelete:se,showDeletedDialog:f,deletedTenantList:Y,deletedSelected:D,fetchDeletedTenants:I,handleDeletedSelectionChange:fe,handleRestore:_e,handleRealDelete:be,handleBatchRealDelete:ye,renewDialogVisible:h,renewForm:v,renewTenantId:p,handleRenewSubmit:ve}}},Ye={class:"tenant-management"},Me={class:"search-section"},Ne={class:"stats-section"},Ie={class:"stat-content"},Ae={class:"stat-info"},je={class:"stat-value"},qe={class:"stat-content"},Ge={class:"stat-info"},Oe={class:"stat-value"},He={class:"stat-content"},Je={class:"stat-info"},We={class:"stat-value"},Xe={class:"stat-content"},Ze={class:"stat-info"},Ke={class:"stat-value"},Qe={class:"action-section"},$e={class:"action-buttons"},ea={class:"table-section"},aa={class:"tenant-info"},ta={class:"tenant-logo"},la=["src"],na={key:1,class:"default-logo"},oa={class:"tenant-details"},sa={class:"tenant-name"},da={class:"tenant-code"},ia={class:"pagination-wrapper"},ra=["src"],ca={key:1,class:"el-icon-plus logo-uploader-icon"},ma={class:"dialog-footer"},ua={key:0,class:"tenant-detail"},ga={class:"feature-list"},pa={style:{"margin-top":"10px"}};function fa(_,a,R,t,z,G){const x=g("el-input"),c=g("el-form-item"),V=g("el-option"),L=g("el-select"),f=g("el-button"),Y=g("el-form"),D=g("el-card"),h=g("el-col"),v=g("el-row"),p=g("el-table-column"),C=g("el-tag"),y=g("el-dropdown-item"),O=g("el-dropdown-menu"),b=g("el-dropdown"),j=g("el-table"),k=g("el-pagination"),H=g("el-upload"),N=g("el-tab-pane"),E=g("el-input-number"),q=g("el-date-picker"),S=g("el-checkbox"),J=g("el-checkbox-group"),W=g("el-tabs"),M=g("el-dialog"),w=g("el-descriptions-item"),X=g("el-descriptions"),Z=xe("loading");return U(),B("div",Ye,[a[69]||(a[69]=he('<div class="page-header" data-v-18c94e74><div class="header-content" data-v-18c94e74><h1 class="page-title" data-v-18c94e74><i class="el-icon-office-building" data-v-18c94e74></i> 租户管理 </h1><p class="page-description" data-v-18c94e74>管理系统租户和多租户配置</p></div></div>',1)),d("div",Me,[e(D,{class:"search-card"},{default:l(()=>[e(Y,{model:t.searchForm,inline:!0,class:"search-form"},{default:l(()=>[e(c,{label:"租户名称"},{default:l(()=>[e(x,{modelValue:t.searchForm.name,"onUpdate:modelValue":a[0]||(a[0]=n=>t.searchForm.name=n),placeholder:"请输入租户名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(c,{label:"租户代码"},{default:l(()=>[e(x,{modelValue:t.searchForm.code,"onUpdate:modelValue":a[1]||(a[1]=n=>t.searchForm.code=n),placeholder:"请输入租户代码",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(c,{label:"状态"},{default:l(()=>[e(L,{modelValue:t.searchForm.status,"onUpdate:modelValue":a[2]||(a[2]=n=>t.searchForm.status=n),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(V,{label:"正常",value:1}),e(V,{label:"停用",value:0}),e(V,{label:"过期",value:2})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"套餐类型"},{default:l(()=>[e(L,{modelValue:t.searchForm.packageType,"onUpdate:modelValue":a[3]||(a[3]=n=>t.searchForm.packageType=n),placeholder:"请选择套餐",clearable:"",style:{width:"120px"}},{default:l(()=>[e(V,{label:"基础版",value:1}),e(V,{label:"专业版",value:2}),e(V,{label:"企业版",value:3})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(f,{type:"primary",onClick:t.handleSearch,loading:t.loading},{default:l(()=>a[30]||(a[30]=[d("i",{class:"el-icon-search"},null,-1),i(" 搜索 ")])),_:1,__:[30]},8,["onClick","loading"]),e(f,{onClick:t.handleReset},{default:l(()=>a[31]||(a[31]=[d("i",{class:"el-icon-refresh"},null,-1),i(" 重置 ")])),_:1,__:[31]},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),d("div",Ne,[e(v,{gutter:20},{default:l(()=>[e(h,{span:6},{default:l(()=>[e(D,{class:"stat-card"},{default:l(()=>[d("div",Ie,[a[33]||(a[33]=d("div",{class:"stat-icon total"},[d("i",{class:"el-icon-office-building"})],-1)),d("div",Ae,[d("div",je,u(t.stats.totalTenants),1),a[32]||(a[32]=d("div",{class:"stat-label"},"总租户数",-1))])])]),_:1})]),_:1}),e(h,{span:6},{default:l(()=>[e(D,{class:"stat-card"},{default:l(()=>[d("div",qe,[a[35]||(a[35]=d("div",{class:"stat-icon active"},[d("i",{class:"el-icon-circle-check"})],-1)),d("div",Ge,[d("div",Oe,u(t.stats.activeTenants),1),a[34]||(a[34]=d("div",{class:"stat-label"},"活跃租户",-1))])])]),_:1})]),_:1}),e(h,{span:6},{default:l(()=>[e(D,{class:"stat-card"},{default:l(()=>[d("div",He,[a[37]||(a[37]=d("div",{class:"stat-icon expired"},[d("i",{class:"el-icon-warning"})],-1)),d("div",Je,[d("div",We,u(t.stats.expiredTenants),1),a[36]||(a[36]=d("div",{class:"stat-label"},"即将过期",-1))])])]),_:1})]),_:1}),e(h,{span:6},{default:l(()=>[e(D,{class:"stat-card"},{default:l(()=>[d("div",Xe,[a[39]||(a[39]=d("div",{class:"stat-icon revenue"},[d("i",{class:"el-icon-money"})],-1)),d("div",Ze,[d("div",Ke,"¥"+u(t.stats.monthlyRevenue),1),a[38]||(a[38]=d("div",{class:"stat-label"},"月收入",-1))])])]),_:1})]),_:1})]),_:1})]),d("div",Qe,[d("div",$e,[e(f,{type:"primary",onClick:t.handleAdd},{default:l(()=>a[40]||(a[40]=[d("i",{class:"el-icon-plus"},null,-1),i(" 新增租户 ")])),_:1,__:[40]},8,["onClick"]),e(f,{type:"success",onClick:t.handleBatchRenew,disabled:t.selectedTenants.length===0},{default:l(()=>a[41]||(a[41]=[d("i",{class:"el-icon-refresh"},null,-1),i(" 批量续费 ")])),_:1,__:[41]},8,["onClick","disabled"]),e(f,{type:"warning",onClick:t.handleBatchNotify,disabled:t.selectedTenants.length===0},{default:l(()=>a[42]||(a[42]=[d("i",{class:"el-icon-message"},null,-1),i(" 批量通知 ")])),_:1,__:[42]},8,["onClick","disabled"]),e(f,{type:"info",onClick:t.handleExport},{default:l(()=>a[43]||(a[43]=[d("i",{class:"el-icon-download"},null,-1),i(" 导出数据 ")])),_:1,__:[43]},8,["onClick"]),e(f,{type:"danger",onClick:a[4]||(a[4]=n=>t.showDeletedDialog=!0)},{default:l(()=>a[44]||(a[44]=[i(" 最近删除 ")])),_:1,__:[44]})])]),d("div",ea,[e(D,{class:"table-card"},{default:l(()=>[Ce((U(),ae(j,{data:t.tenantList,onSelectionChange:t.handleSelectionChange,stripe:"",style:{width:"100%"}},{default:l(()=>[e(p,{type:"selection",width:"55"}),e(p,{prop:"id",label:"ID",width:"80"}),e(p,{label:"租户信息","min-width":"250"},{default:l(({row:n})=>[d("div",aa,[d("div",ta,[n.logo?(U(),B("img",{key:0,src:n.logo,alt:"租户logo"},null,8,la)):(U(),B("div",na,u(n.name.charAt(0)),1))]),d("div",oa,[d("div",sa,u(n.name),1),d("div",da,u(n.code),1)])])]),_:1}),e(p,{prop:"contactPerson",label:"联系人",width:"100"}),e(p,{prop:"contactPhone",label:"联系电话",width:"130"}),e(p,{label:"套餐类型",width:"100"},{default:l(({row:n})=>[e(C,{type:t.getPackageType(n.packageType)},{default:l(()=>[i(u(t.getPackageText(n.packageType)),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"状态",width:"80"},{default:l(({row:n})=>[e(C,{type:t.getStatusType(n.status)},{default:l(()=>[i(u(t.getStatusText(n.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"userCount",label:"用户数",width:"80"}),e(p,{prop:"maxUsers",label:"用户上限",width:"80"}),e(p,{label:"到期时间",width:"120"},{default:l(({row:n})=>[d("span",{class:$(t.getExpireClass(n.expireTime))},u(t.formatDate(n.expireTime,"YYYY-MM-DD")),3)]),_:1}),e(p,{prop:"createTime",label:"创建时间",width:"160"},{default:l(({row:n})=>[i(u(t.formatDate(n.createTime)),1)]),_:1}),e(p,{label:"操作",width:"280",fixed:"right"},{default:l(({row:n})=>[e(f,{size:"small",onClick:F=>t.handleView(n)},{default:l(()=>a[45]||(a[45]=[d("i",{class:"el-icon-view"},null,-1),i(" 查看 ")])),_:2,__:[45]},1032,["onClick"]),e(f,{size:"small",onClick:F=>t.handleEdit(n)},{default:l(()=>a[46]||(a[46]=[d("i",{class:"el-icon-edit"},null,-1),i(" 编辑 ")])),_:2,__:[46]},1032,["onClick"]),e(f,{size:"small",type:"danger",onClick:F=>t.handleDelete(n)},{default:l(()=>a[47]||(a[47]=[d("i",{class:"el-icon-delete"},null,-1),i(" 删除 ")])),_:2,__:[47]},1032,["onClick"]),e(b,{onCommand:F=>t.handleDropdownCommand(F,n)},{dropdown:l(()=>[e(O,null,{default:l(()=>[e(y,{command:`renew-${n.id}`},{default:l(()=>a[49]||(a[49]=[i(" 续费管理 ")])),_:2,__:[49]},1032,["command"]),e(y,{command:`config-${n.id}`},{default:l(()=>a[50]||(a[50]=[i(" 配置管理 ")])),_:2,__:[50]},1032,["command"]),e(y,{command:`users-${n.id}`},{default:l(()=>a[51]||(a[51]=[i(" 用户管理 ")])),_:2,__:[51]},1032,["command"]),e(y,{command:`stats-${n.id}`},{default:l(()=>a[52]||(a[52]=[i(" 使用统计 ")])),_:2,__:[52]},1032,["command"]),e(y,{command:`backup-${n.id}`,divided:""},{default:l(()=>a[53]||(a[53]=[i(" 数据备份 ")])),_:2,__:[53]},1032,["command"]),e(y,{command:`${n.status===1?"disable":"enable"}-${n.id}`,class:$(n.status===1?"danger-item":"success-item")},{default:l(()=>[i(u(n.status===1?"停用租户":"启用租户"),1)]),_:2},1032,["command","class"])]),_:2},1024)]),default:l(()=>[e(f,{size:"small",type:"info"},{default:l(()=>a[48]||(a[48]=[i(" 更多"),d("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)])),_:1,__:[48]})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[Z,t.loading]]),d("div",ia,[e(k,{"current-page":t.pagination.page,"onUpdate:currentPage":a[5]||(a[5]=n=>t.pagination.page=n),"page-size":t.pagination.size,"onUpdate:pageSize":a[6]||(a[6]=n=>t.pagination.size=n),"page-sizes":[10,20,50,100],total:t.pagination.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),e(M,{title:t.dialogTitle,modelValue:t.dialogVisible,"onUpdate:modelValue":a[22]||(a[22]=n=>t.dialogVisible=n),width:"800px","before-close":t.handleDialogClose},{footer:l(()=>[d("span",ma,[e(f,{onClick:t.handleDialogClose},{default:l(()=>a[60]||(a[60]=[i("取消")])),_:1,__:[60]},8,["onClick"]),e(f,{type:"primary",onClick:t.handleSubmit,loading:t.submitLoading},{default:l(()=>a[61]||(a[61]=[i(" 确定 ")])),_:1,__:[61]},8,["onClick","loading"])])]),default:l(()=>[e(Y,{ref:"tenantFormRef",model:t.tenantForm,rules:t.tenantFormRules,"label-width":"120px"},{default:l(()=>[e(W,{modelValue:t.activeTab,"onUpdate:modelValue":a[21]||(a[21]=n=>t.activeTab=n)},{default:l(()=>[e(N,{label:"基本信息",name:"basic"},{default:l(()=>[e(c,{label:"租户名称",prop:"name"},{default:l(()=>[e(x,{modelValue:t.tenantForm.name,"onUpdate:modelValue":a[7]||(a[7]=n=>t.tenantForm.name=n),placeholder:"请输入租户名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"租户代码",prop:"code"},{default:l(()=>[e(x,{modelValue:t.tenantForm.code,"onUpdate:modelValue":a[8]||(a[8]=n=>t.tenantForm.code=n),placeholder:"请输入租户代码"},null,8,["modelValue"])]),_:1}),e(v,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[e(c,{label:"联系人",prop:"contactPerson"},{default:l(()=>[e(x,{modelValue:t.tenantForm.contactPerson,"onUpdate:modelValue":a[9]||(a[9]=n=>t.tenantForm.contactPerson=n),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:l(()=>[e(c,{label:"联系电话",prop:"contactPhone"},{default:l(()=>[e(x,{modelValue:t.tenantForm.contactPhone,"onUpdate:modelValue":a[10]||(a[10]=n=>t.tenantForm.contactPhone=n),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{label:"联系邮箱",prop:"contactEmail"},{default:l(()=>[e(x,{modelValue:t.tenantForm.contactEmail,"onUpdate:modelValue":a[11]||(a[11]=n=>t.tenantForm.contactEmail=n),placeholder:"请输入联系邮箱"},null,8,["modelValue"])]),_:1}),e(c,{label:"公司地址",prop:"address"},{default:l(()=>[e(x,{modelValue:t.tenantForm.address,"onUpdate:modelValue":a[12]||(a[12]=n=>t.tenantForm.address=n),placeholder:"请输入公司地址"},null,8,["modelValue"])]),_:1}),e(c,{label:"租户logo"},{default:l(()=>[e(H,{class:"logo-uploader",action:"/api/upload","show-file-list":!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeLogoUpload},{default:l(()=>[t.tenantForm.logo?(U(),B("img",{key:0,src:t.tenantForm.logo,class:"logo-image"},null,8,ra)):(U(),B("i",ca))]),_:1},8,["on-success","before-upload"])]),_:1})]),_:1}),e(N,{label:"套餐配置",name:"package"},{default:l(()=>[e(c,{label:"套餐类型",prop:"packageType"},{default:l(()=>[e(L,{modelValue:t.tenantForm.packageType,"onUpdate:modelValue":a[13]||(a[13]=n=>t.tenantForm.packageType=n),placeholder:"请选择套餐类型",style:{width:"100%"}},{default:l(()=>[e(V,{label:"基础版",value:1}),e(V,{label:"专业版",value:2}),e(V,{label:"企业版",value:3})]),_:1},8,["modelValue"])]),_:1}),e(v,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[e(c,{label:"用户上限",prop:"maxUsers"},{default:l(()=>[e(E,{modelValue:t.tenantForm.maxUsers,"onUpdate:modelValue":a[14]||(a[14]=n=>t.tenantForm.maxUsers=n),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:l(()=>[e(c,{label:"存储空间(GB)",prop:"storageLimit"},{default:l(()=>[e(E,{modelValue:t.tenantForm.storageLimit,"onUpdate:modelValue":a[15]||(a[15]=n=>t.tenantForm.storageLimit=n),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[e(c,{label:"开始时间",prop:"startTime"},{default:l(()=>[e(q,{modelValue:t.tenantForm.startTime,"onUpdate:modelValue":a[16]||(a[16]=n=>t.tenantForm.startTime=n),type:"date",placeholder:"请选择开始时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:l(()=>[e(c,{label:"到期时间",prop:"expireTime"},{default:l(()=>[e(q,{modelValue:t.tenantForm.expireTime,"onUpdate:modelValue":a[17]||(a[17]=n=>t.tenantForm.expireTime=n),type:"date",placeholder:"请选择到期时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{label:"功能权限"},{default:l(()=>[e(J,{modelValue:t.tenantForm.features,"onUpdate:modelValue":a[18]||(a[18]=n=>t.tenantForm.features=n)},{default:l(()=>[e(S,{value:"user_management"},{default:l(()=>a[54]||(a[54]=[i("用户管理")])),_:1,__:[54]}),e(S,{value:"meeting_management"},{default:l(()=>a[55]||(a[55]=[i("会议管理")])),_:1,__:[55]}),e(S,{value:"news_management"},{default:l(()=>a[56]||(a[56]=[i("资讯管理")])),_:1,__:[56]}),e(S,{value:"course_management"},{default:l(()=>a[57]||(a[57]=[i("课程管理")])),_:1,__:[57]}),e(S,{value:"data_analysis"},{default:l(()=>a[58]||(a[58]=[i("数据分析")])),_:1,__:[58]}),e(S,{value:"api_access"},{default:l(()=>a[59]||(a[59]=[i("API接口")])),_:1,__:[59]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(N,{label:"其他设置",name:"settings"},{default:l(()=>[e(c,{label:"状态",prop:"status"},{default:l(()=>[e(L,{modelValue:t.tenantForm.status,"onUpdate:modelValue":a[19]||(a[19]=n=>t.tenantForm.status=n),placeholder:"请选择状态",style:{width:"100%"}},{default:l(()=>[e(V,{label:"正常",value:1}),e(V,{label:"停用",value:0})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"备注",prop:"remark"},{default:l(()=>[e(x,{modelValue:t.tenantForm.remark,"onUpdate:modelValue":a[20]||(a[20]=n=>t.tenantForm.remark=n),type:"textarea",rows:4,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","before-close"]),e(M,{title:"租户详情",modelValue:t.viewDialogVisible,"onUpdate:modelValue":a[23]||(a[23]=n=>t.viewDialogVisible=n),width:"900px"},{default:l(()=>[t.currentTenant?(U(),B("div",ua,[e(X,{column:2,border:""},{default:l(()=>[e(w,{label:"租户名称"},{default:l(()=>[i(u(t.currentTenant.name),1)]),_:1}),e(w,{label:"租户代码"},{default:l(()=>[i(u(t.currentTenant.code),1)]),_:1}),e(w,{label:"联系人"},{default:l(()=>[i(u(t.currentTenant.contactPerson),1)]),_:1}),e(w,{label:"联系电话"},{default:l(()=>[i(u(t.currentTenant.contactPhone),1)]),_:1}),e(w,{label:"联系邮箱"},{default:l(()=>[i(u(t.currentTenant.contactEmail),1)]),_:1}),e(w,{label:"公司地址"},{default:l(()=>[i(u(t.currentTenant.address),1)]),_:1}),e(w,{label:"套餐类型"},{default:l(()=>[e(C,{type:t.getPackageType(t.currentTenant.packageType)},{default:l(()=>[i(u(t.getPackageText(t.currentTenant.packageType)),1)]),_:1},8,["type"])]),_:1}),e(w,{label:"状态"},{default:l(()=>[e(C,{type:t.getStatusType(t.currentTenant.status)},{default:l(()=>[i(u(t.getStatusText(t.currentTenant.status)),1)]),_:1},8,["type"])]),_:1}),e(w,{label:"用户数量"},{default:l(()=>[i(u(t.currentTenant.userCount)+"/"+u(t.currentTenant.maxUsers),1)]),_:1}),e(w,{label:"存储使用"},{default:l(()=>[i(u(t.currentTenant.storageUsed)+"/"+u(t.currentTenant.storageLimit)+"GB",1)]),_:1}),e(w,{label:"开始时间"},{default:l(()=>[i(u(t.formatDate(t.currentTenant.startTime,"YYYY-MM-DD")),1)]),_:1}),e(w,{label:"到期时间"},{default:l(()=>[d("span",{class:$(t.getExpireClass(t.currentTenant.expireTime))},u(t.formatDate(t.currentTenant.expireTime,"YYYY-MM-DD")),3)]),_:1})]),_:1}),d("div",ga,[a[62]||(a[62]=d("h3",null,"功能权限",-1)),(U(!0),B(Fe,null,Ue(t.currentTenant.features,n=>(U(),ae(C,{key:n,style:{"margin-right":"8px","margin-bottom":"8px"}},{default:l(()=>[i(u(t.getFeatureText(n)),1)]),_:2},1024))),128))])])):De("",!0)]),_:1},8,["modelValue"]),e(M,{modelValue:t.showDeletedDialog,"onUpdate:modelValue":a[24]||(a[24]=n=>t.showDeletedDialog=n),title:"最近删除的租户",width:"80%"},{default:l(()=>[e(j,{data:t.deletedTenantList,ref:"deletedTable",onSelectionChange:t.handleDeletedSelectionChange},{default:l(()=>[e(p,{type:"selection",width:"55"}),e(p,{prop:"id",label:"ID",width:"80"}),e(p,{prop:"name",label:"租户名称"}),e(p,{prop:"code",label:"租户代码"}),e(p,{prop:"contactPerson",label:"联系人"}),e(p,{prop:"contactPhone",label:"联系电话"}),e(p,{prop:"status",label:"状态"}),e(p,{prop:"createTime",label:"创建时间"}),e(p,{label:"操作",width:"220"},{default:l(({row:n})=>[e(f,{size:"small",onClick:F=>t.handleView(n)},{default:l(()=>a[63]||(a[63]=[i("查看")])),_:2,__:[63]},1032,["onClick"]),e(f,{size:"small",type:"success",onClick:F=>t.handleRestore(n)},{default:l(()=>a[64]||(a[64]=[i("恢复")])),_:2,__:[64]},1032,["onClick"]),e(f,{size:"small",type:"danger",onClick:F=>t.handleRealDelete(n)},{default:l(()=>a[65]||(a[65]=[i("彻底删除")])),_:2,__:[65]},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"]),d("div",pa,[e(f,{type:"danger",disabled:t.deletedSelected.length===0,onClick:t.handleBatchRealDelete},{default:l(()=>a[66]||(a[66]=[i(" 批量彻底删除 ")])),_:1,__:[66]},8,["disabled","onClick"])])]),_:1},8,["modelValue"]),e(M,{modelValue:t.renewDialogVisible,"onUpdate:modelValue":a[29]||(a[29]=n=>t.renewDialogVisible=n),title:"续费管理",width:"400px"},{footer:l(()=>[e(f,{onClick:a[28]||(a[28]=n=>t.renewDialogVisible=!1)},{default:l(()=>a[67]||(a[67]=[i("取消")])),_:1,__:[67]}),e(f,{type:"primary",onClick:t.handleRenewSubmit},{default:l(()=>a[68]||(a[68]=[i("确定")])),_:1,__:[68]},8,["onClick"])]),default:l(()=>[e(Y,null,{default:l(()=>[e(c,{label:"年"},{default:l(()=>[e(E,{modelValue:t.renewForm.years,"onUpdate:modelValue":a[25]||(a[25]=n=>t.renewForm.years=n),min:0,controls:!1,placeholder:"可为空",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"月"},{default:l(()=>[e(E,{modelValue:t.renewForm.months,"onUpdate:modelValue":a[26]||(a[26]=n=>t.renewForm.months=n),min:0,controls:!1,placeholder:"可为空",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"日"},{default:l(()=>[e(E,{modelValue:t.renewForm.days,"onUpdate:modelValue":a[27]||(a[27]=n=>t.renewForm.days=n),min:0,controls:!1,placeholder:"可为空",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ba=Ve(Re,[["render",fa],["__scopeId","data-v-18c94e74"]]);export{ba as default};
